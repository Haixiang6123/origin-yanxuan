# 接口文档

## 约定

### 后台回传数据

|名称|含义|类型|取值范围|
|---|---|---|---|
|result|请求结果|string|"success"/"failure"|
|data|请求状态|json|{根据属性自定}|
|error|错误名|string|根据错误自定|
|errorMessage|错误信息|string|简要描述错误, 用户可以看懂此描述|

返回格式样例

```json
　{
    "result":"success"/"failure", 
    "data": 
    {
        "键": "值"
    },
    "error":"错误名", 
    "errorMessage": "错误信息"
  }
```

## 系统模块

### 注册模块

| 接口地址 | 请求方式 |
| --- | --- |
| /users/register | POST |

#### 请求参数

|名称|含义|类型|
|---|---|---|
|telephone|手机号|string|
|password|密码|string|

请求参数示例：

```json
{
    "email": "18805862675",
    "password": "123456"
}
```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|result|结果|string|

成功返回数据示例：

```json
{
    "result": "success",
    
}
```

失败返回数据示例：

```json
{
    "result": "error",
  
}
```
### 登录模块

| 接口地址 | 请求方式 |
| --- | --- |
| /users/login | POST |

#### 请求参数

|名称|含义|类型|
|---|---|---|
|telephone|手机号|string|
|password|密码|string|

请求参数示例：

```json
{
    "email": "18805862675",
    "password": "123456"
}
```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|result|结果|string|
|user|成功时返回|object|
|errorMsg|失败时返回|string|


成功返回数据示例：

```json
{
    "result": "success",
    "user": {
        "_id": "5964653f7c95dd120ca8e5b9",
        "telephone": "18805862675",
        "password": "123456",
        "__v": 0,
        "address": [],
        "interest": []
    }
}
```

失败返回数据示例：
#### 密码错误
```json  
{
    "result": "error",
    "errorMeg": "1"
}
```
#### 找不到该用户
```json
{
    "result": "error",
    "errorMeg": "2"
}
```

### 修改用户信息模块

| 接口地址 | 请求方式 |
| --- | --- |
| /users/changeInformation | PATCH|

#### 请求参数

|名称|含义|类型|
|---|---|---|
|telephone|手机号|string|
|photo|头像|string|
|interest|兴趣爱好|Array|
|address|收货地址|Array|
|name|昵称|string|
|gender|性别|string|


请求参数示例：

```json
{
    "telephone": "18805862675",
    "photo":"I.jpg",
    "interest":"[运动，美食]"
    "address":"[{name:"xukangqi",telephone:"123124",address:"辽宁省沈阳市东北大学"}]",
    "name":"海怪",
    "gender":"female"
}
```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|result|结果|string|



成功返回数据示例：

```json
{
    "result": "success",

}
```

失败返回数据示例：

```json  
{
    "result": "error",
} 
```

### 获取商品信息

| 接口地址 | 请求方式 |
| --- | --- |
| /goods/goods | GET |

#### 请求参数

|名称|含义|类型|
|---|---|---|
|ID|商品编号|Number|



请求参数示例：

```json
{
    "ID": "1"
}
```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|ID|商品编号|Number|
|price| 价格|Number|
|topName|商品名字|String|
|chara|商品品类四字描述|String|
|subName|商品二级名字|String|
|shortDescription|6个简短描述，详情页需要|Array|
|shortDescriptionImage|3个描述的小图片| Array|
|headImage|顶部主要描述图片，第一张图片为缩小时展示| Array|
|type |商品能选分类|Array|
|inventory|库存| Number|
|description|商品介绍图片| Array|
|information|商品参数| Array|
|sale|商品销量|Number|
|category|商品所属分类|String|
|subCategory|商品所属子分类|String|
|date |商品上架时间|String|
|manufacturer|商品制造商| String|
|label|商品正在进行的活动|Array|



成功返回数据示例：

```json
{
    "result": "success",
    "data": [
        {
            "_id": "596480f3e1f2080bf4d296dd",
            "ID": 4,
            "price": 45,
            "topName": "a",
            "subName": "b",
            "chara":"a",
            "inventory":[999,999,999,999,999,999,],
            "sale": 39,
            "category": "居家",
            "subCategory":"居家"，
            "date": "1499758835010",
            "manufacturer": "ck",
            "__v": 0,
            "label": [
                {
                    "type": "1",
                    "title": "a"
                },
                {
                    "type": "2",
                    "title": "a"
                }
            ],
            "information": [
                {
                  "attrName":"asd"
                  "attrValue":"af"
                },
                {
                  "attrName":"asd"
                  "attrValue":"af"
                },
               {
                  "attrName":"asd"
                  "attrValue":"af"
                }
                ....
            ],
            "description": [
                "a",
                "a",
                "a",
                "a",
                "a",
                "a"
            ],
            "type": [
                "a",
                "a",
                "a",
                "a",
                "a",
                "a"
            ],
            "headImage": [
                "a",
                "a",
                "a",
                "a",
                "a"
            ],
            "shortDescriptionImage": [
                "a",
                "a",
                "a",
                "a",
                "a",
                "a"
            ],
            "shortDescription": [
                "a",
                "a",
                "a",
                "a",
                "a",
                "a"
            ]
        }
}
```

失败返回数据示例：

```json  
{
    "result": "error",
} 
```


### 获取销量前几的商品信息

| 接口地址 | 请求方式 |
| --- | --- |
| /goods/topSale | GET |

#### 请求参数

|名称|含义|类型|
|---|---|---|




请求参数示例：

```json
{
    //无需参数
}
```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|ID|商品编号|Number|
|price| 价格|Number|
|topName|商品名字|String|
|chara|商品品类四字描述|String|
|subName|商品二级名字|String|
|headImage|描述图片|String|
|label|商品正在进行的活动|Array|



成功返回数据示例：

```json
{
    "result": "success",
    "data": [
        {
            "_id": "596480f3e1f2080bf4d296dd",
            "ID": 4,
            "price": 45,
            "topName": "a",
            "chara":"a",
            "subName": "b",
            "label": [
                {
                    "type": "1",
                    "title": "a"
                },
                {
                    "type": "2",
                    "title": "a"
                }
            ],
            
        }
        ......
}
```

失败返回数据示例：

```json  
{
    "result": "error",
} 
```

### 获取最新上架的商品信息

| 接口地址 | 请求方式 |
| --- | --- |
| /goods/recentSale | GET |

#### 请求参数

|名称|含义|类型|
|---|---|---|




请求参数示例：

```json
{
    //无需参数
}
```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|ID|商品编号|Number|
|price| 价格|Number|
|topName|商品名字|String|
|chara|商品品类四字描述|String|
|subName|商品二级名字|String|
|headImage|描述图片|String|
|label|商品正在进行的活动|Array|



成功返回数据示例：

```json
{
    "result": "success",
    "data": [
        {
            "_id": "596480f3e1f2080bf4d296dd",
            "ID": 4,
            "price": 45,
            "topName": "a",
            "chara":"a",
            "subName": "b",
            "label": [
                {
                    "type": "1",
                    "title": "a"
                },
                {
                    "type": "2",
                    "title": "a"
                }
            ],
            
        }
        ......
}
```

失败返回数据示例：

```json  
{
    "result": "error",
} 
```

### 根据商品分类获取所有商品分类下的商品

| 接口地址 | 请求方式 |
| --- | --- |
| /goods/displayGoods | GET |

#### 请求参数

|名称|含义|类型|
|---|---|---|



请求参数示例：

```json
{
    //无需参数
}
```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|result|结果|String|
|name|商品分类|String|
|data|当前分类下的商品|Array|




成功返回数据示例：

```json
{
    "result": "success",
    "data": [
        {
            "name": "0",
            "data": [
                {
                    "ID": 0,
                    "topName": "a",
                    "subName": "b",
                    "price": 5,
                    "label": [
                        {
                            "type": "1",
                            "title": "a"
                        },
                        {
                            "type": "2",
                            "title": "a"
                        }
                    ],
                    "chara": "A",
                    "headImage": "a",
                    "category": "0"
                },
                {
                    "ID": 0,
                    "topName": "a",
                    "subName": "b",
                    "price": 5,
                    "label": [
                        {
                            "type": "1",
                            "title": "a"
                        },
                        {
                            "type": "2",
                            "title": "a"
                        }
                    ],
                    "chara": "A",
                    "headImage": "a",
                    "category": "0"
                }
                .......
```

失败返回数据示例：

```json  
{
    "result": "error",
} 
```

### 获取商品分类

| 接口地址 | 请求方式 |
| --- | --- |
| /goods/category | GET |

#### 请求参数

|名称|含义|类型|
|---|---|---|




请求参数示例：

```json
{
    //无需参数
}
```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|result|结果|String|
|data|返回数据|Array|
|data>name|分类名|String|
|data>picture|分类页面图片|String|
|data>subCatagory|子分类|Array|



成功返回数据示例：

```json
{
    "result": "success",
    "data": [
        {
            "_id": "5965c26e9258131360e27a10",
            "name": "9",
            "picture": "a.jpg",
            "__v": 0,
            "subCatagory": [
                {
                    "name": 109,
                    "photo": "a.jpg"
                },
                {
                    "name": "a",
                    "photo": "a.jpg"
                }
            ]
        },
        {
            "_id": "5965c3991a207f1514419867",
            "name": "0",
            "picture": "a.jpg",
            "__v": 0,
            "subCatagory": [
                {
                    "name": 100,
                    "photo": "a.jpg"
                },
                {
                    "name": "a",
                    "photo": "a.jpg"
                }
            ]
        }
        ]
```

失败返回数据示例：

```json  
{
    "result": "error",
} 
```

### 获取特定分类下所有子分类的商品

| 接口地址 | 请求方式 |
| --- | --- |
| /goods/certainCategory | POST |

#### 请求参数

|名称|含义|类型|
|---|---|---|
|category|主分类|String|



请求参数示例：

```
{
"category":"0"
}


```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|result|结果|String|
|name|商品分类|String|
|data|当前分类下的商品|Array|



成功返回数据示例：

```json
{
    "result": "success",
    "data": [
        {
            "name": 100,
            "data": [
                {
                    "ID": 0,
                    "topName": "懒人清洁新选择",
                    "subName": "高效清洁组合",
                    "price": 5,
                    "label": [
                        {
                            "type": "1",
                            "title": "爆品"
                        },
                        {
                            "type": "2",
                            "title": "新品"
                        }
                    ],
                    "chara": "二种可选",
                    "headImage": "/static/img/goodsImage/1.png"
                }
                ,
                ｛
                ｝
            ]
        },
```

失败返回数据示例：

```json  
{
    "result": "error",
} 
```

### 获取特定子分类下所有的商品

| 接口地址 | 请求方式 |
| --- | --- |
| /goods/subCategoryGoods | POST |

#### 请求参数

|名称|含义|类型|
|---|---|---|
|subCategory|子分类|String|



请求参数示例：

```
{
"subCategory":"100"
}


```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|result|结果|String|
|name|商品分类|String|
|data|当前分类下的商品|Array|



成功返回数据示例：

```json
{
    "result": "success",
    "data": [
        {
            "ID": 1,
            "topName": "懒人清洁新选择",
            "subName": "高效清洁组合",
            "price": 15,
            "label": [
                {
                    "type": "1",
                    "title": "爆品"
                },
                {
                    "type": "2",
                    "title": "新品"
                }
            ],
            "chara": "二种可选",
            "headImage": "/static/img/goodsImage/1.png"
        }
    ]
}
```

失败返回数据示例：

```json  
{
    "result": "error",
} 
```

### 根据特定关键词查找商品

| 接口地址 | 请求方式 |
| --- | --- |
| /goods/search | POST |

#### 请求参数

|名称|含义|类型|
|---|---|---|
|key|关键词|String|



请求参数示例：

```
{
"key":"关键词"
}


```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|result|结果|String|
|data|与关键字匹配的商品(十个)|Array|



成功返回数据示例：

```json
{
    "result": "success",
    "data": [
        {
            "ID": 0,
            "topName": "懒人清洁新选择",
            "subName": "高效清洁组合",
            "price": 5,
            "label": [
                {
                    "type": "1",
                    "title": "爆品"
                },
                {
                    "type": "2",
                    "title": "新品"
                }
            ],
            "chara": "二种可选",
            "headImage": "/static/img/goodsImage/1.png"
    },
```

失败返回数据示例：

```json  
{
    "result": "error",
} 
```

### 获取当前系统中所有的分类

| 接口地址 | 请求方式 |
| --- | --- |
| /goods/category | GET |

#### 请求参数

|名称|含义|类型|
|---|---|---|



请求参数示例：

```
{
    //无需参数
}


```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|result|结果|String|
|data|返回数据|Array|
|data>name|商品分类|String|
|data>picture|商品分类|String|
|data>subCategory|当前分类下的子分类|Array|



成功返回数据示例：

```json
 "result": "success",
    "data": [
        {
            "_id": "59672064c548520de07d4253",
            "name": "8",
            "picture": "a.jpg",
            "__v": 0,
            "subCategory": [
                {
                    "name": 108,
                    "photo": "a.jpg"
                },
                {
                    "name": 109,
                    "photo": "a.jpg"
                },
                {
                    "name": 110,
                    "photo": "a.jpg"
                },
                {
                    "name": 111,
                    "photo": "a.jpg"
                },
                {
                    "name": 112,
                    "photo": "a.jpg"
                },
                {
                    "name": 113,
                    "photo": "a.jpg"
                },
                {
                    "name": 114,
                    "photo": "a.jpg"
                }
            ]
        },
        ........
```

失败返回数据示例：

```json  
{
    "result": "error",
} 
```

### 获取当前系统中所有的专题列表

| 接口地址 | 请求方式 |
| --- | --- |
| /goods/topic | GET |

#### 请求参数

|名称|含义|类型|
|---|---|---|



请求参数示例：

```
{
    //无需参数
}


```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|result|结果|String|
|data|返回数据|Array|
|data>topicID|专题编号|Number|
|data>writer|专题作者|String|
|data>writerImage|专题作者头像|String|
|data>headline|专题标题|String|
|data>content|专题内容节选|String|
|data>picture|专题图片|Array|
|data>watchNumber|专题查看量|String|
|data>price|专题商品价格|Number|

成功返回数据示例：

```json
{
    "result": "success",
    "data": [
        {
            "_id": "596822d8779c2612a018a535",
            "topicID": 0,
            "writer": "餐厨组：锅锅",
            "writerImage": "/static/img/topicImage/writerImage/1.jpg",
            "headline": "用这套刀，发现德式厨房奥秘",
            "content": "如果你参观过德国人的厨房，一定会被满屋子的bling bling震撼到：不仅台面...",
            "watchNumber": "14.6k",
            "__v": 0,
            "picture": [
                "/static/img/topicImage/headImage/1.jpg",
                "/static/img/topicImage/headImage/2.jpg",
                "/static/img/topicImage/headImage/3.jpg"
            ],
            "price":34
        },
        {

        }
        {

        }
        ]
```

失败返回数据示例：

```json  
{
    "result": "error",
} 
```

### 在商品详情页直接购买

| 接口地址 | 请求方式 |
| --- | --- |
| /goods/order | POST |

#### 请求参数

|名称|含义|类型|
|goodsID|---|Number|
|type|---|String|
|number|---|Number|
|address|---|Object|
|totalFee|---|Number|
|userID|---|String|

请求参数示例：

```
{
    "goodsID":1,
    "type":"red",
    "number":2,
    "address":{
      "receiver":"abc",
      "province":"liaoning"
      "city":"shenyang"
      "detail":""
      "telephone":""
    },
    "totalFee":100,
    "userID":"1123124"
}


```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|result|结果|String|
|orderID|订单号|Number|
|type|错误类型|String|

成功返回数据示例：

```json
{
    "result": "success",
    "orderID": "234356"
```

库存不足,失败返回数据示例：

```json  
{
    "result": "error",
    "type":"1" 
} 
```

找不到该商品,失败返回数据示例：

```json  
{
    "result": "error",
    "type":"2" 
} 
```

### 在商品详情页直接购买

| 接口地址 | 请求方式 |
| --- | --- |
| /goods/order | POST |

#### 请求参数

|名称|含义|类型|
|goodsID|商品编号|Number|
|type|商品类型|String|
|number|商品数量|Number|
|address|收货地址|Object|
|totalFee|总费用|Number|
|userID|用户ID|String|

请求参数示例：

```
{
    "goodsID":1,
    "type":"red",
    "number":2,
    "address":{
      "receiver":"abc",
      "province":"liaoning"
      "city":"shenyang"
      "detail":""
      "telephone":""
    },
    "totalFee":100,
    "userID":"1123124"
}


```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|result|结果|String|
|orderID|订单号|Number|
|type|错误类型|String|

成功返回数据示例：

```json
{
    "result": "success",
    "orderID": "234356"
```

库存不足,失败返回数据示例：

```json  
{
    "result": "error",
    "type":"1" 
} 
```

找不到该商品,失败返回数据示例：

```json  
{
    "result": "error",
    "type":"2" 
} 
```

### 选中购物车中的商品购买

| 接口地址 | 请求方式 |
| --- | --- |
| /shop/order | POST |

#### 请求参数

|名称|含义|类型|
|goodsList|---|Array|
|address|---|Object|
|totalFee|---|Number|
|userID|---|String|

请求参数示例：

```
{ 
   "goodsList":[
     {
      "goodsID":1,
      "type":"red",
       "number":2
     }
   ],
    "address":{
      "receiver":"abc",
      "province":"liaoning"
      "city":"shenyang"
      "detail":""
      "telephone":""
    },
    "totalFee":100,
    "userID":"1123124"
}


```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|result|结果|String|
|orderID|订单号|Number|
|warning|出错商品的编号|Number|

成功返回数据示例：

```json
{
    "result": "success",
    "orderID": "234356"
```

库存不足,失败返回数据示例：

```json  
{
    "result": "error",
    "warning":12345345 
} 
```


### 获取用户购物车列表

| 接口地址 | 请求方式 |
| --- | --- |
| /shop/cart/:ID | GET |

#### 请求参数

|名称|含义|类型|
|---|---|---|
|ID|用户ID|String|


请求参数示例：

```
{
    "ID":"123124"
}


```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|result|结果|String|
|data|返回数据|Array|
|data>goodsList|购物车中商品列表|Array|


成功返回数据示例：

```json
{
    "result": "success",
    "data": [
        {
           "ID": 13123,
           "type": "1",
           "number": 1
        },
        {

        }
        {

        }
        ]
```

失败返回数据示例：

```json  
{
    "result": "error",
} 
```

### 添加商品到购物车

| 接口地址 | 请求方式 |
| --- | --- |
| /shop/addToCart | POST |

#### 请求参数

|名称|含义|类型|
|---|---|---|
|ID|商品ID|Number|
|type|商品类型|String|
|number|商品数量|Number|
|userid|用户ID|String|

请求参数示例：

```
{
    "ID":"123124"，
    "userID":1234234,
    "type": "1",
    "number": 1
}


```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|result|结果|String|
|cartList|购物车中商品列表|Array|


成功返回数据示例：

```json
{
    "result": "success",
    "cartList":[{
      "ID":"123124"，
      "type": "1",
      "number": 1
     },{
      "ID":"123124"，
      "type": "1",
      "number": 1
     }
     .....
    ]
}
```

失败返回数据示例：

```json  
{
    "result": "error",
} 
```

### 删除购物车中的某一个商品

| 接口地址 | 请求方式 |
| --- | --- |
| /shop/cart/:userid/:id | delete |

#### 请求参数

|名称|含义|类型|
|---|---|---|
|id|商品ID|String|
|userid|用户ID|Number|

请求参数示例：

```
{
    "id":"123124"，
    "userid":1234234,
}


```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|result|结果|String|
|cartList|购物车中商品列表|Array|


成功返回数据示例：

```json
{
    "result": "success",
    "cartList":[{
      "ID":"123124"，
      "type": "1",
      "number": 1
     },{
      "ID":"123124"，
      "type": "1",
      "number": 1
     }
     .....
    ]
}
```

失败返回数据示例：

```json  
{
    "result": "error",
} 
```
### 修改购物车中某个商品的数量

| 接口地址 | 请求方式 |
| --- | --- |
| /shop/changeNumebr | POST |

#### 请求参数

|名称|含义|类型|
|---|---|---|
|ID|商品ID|Number|
|type|商品类型|String|
|number|修改后的商品数量|Number|
|userid|用户ID|String|

请求参数示例：

```
{
    "ID":"123124"，
    "userID":1234234,
    "type": "1",
    "number": 1
}


```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|result|结果|String|
|cartList|购物车中商品列表|Array|


成功返回数据示例：

```json
{
    "result": "success",
    "cartList":[{
      "ID":"123124"，
      "type": "1",
      "number": 1
     },{
      "ID":"123124"，
      "type": "1",
      "number": 1
     }
     .....
    ]
}
```

失败返回数据示例：

```json  
{
    "result": "error",
} 
```