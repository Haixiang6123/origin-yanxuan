# 接口文档

## 约定

### 后台回传数据

|名称|含义|类型|取值范围|
|---|---|---|---|
|result|请求结果|string|"success"/"failure"|
|data|请求状态|json|{根据属性自定}|
|error|错误名|string|根据错误自定|
|errorMessage|错误信息|string|简要描述错误, 用户可以看懂此描述|

返回格式样例

```json
　{
    "result":"success"/"failure", 
    "data": 
    {
        "键": "值"
    },
    "error":"错误名", 
    "errorMessage": "错误信息"
  }
```

## 系统模块

### 注册模块

| 接口地址 | 请求方式 |
| --- | --- |
| /users/register | POST |

#### 请求参数

|名称|含义|类型|
|---|---|---|
|telephone|手机号|string|
|password|密码|string|

请求参数示例：

```json
{
    "email": "18805862675",
    "password": "123456"
}
```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|result|结果|string|

成功返回数据示例：

```json
{
    "result": "success",
    
}
```

失败返回数据示例：

```json
{
    "result": "error",
  
}
```
### 登录模块

| 接口地址 | 请求方式 |
| --- | --- |
| /users/login | POST |

#### 请求参数

|名称|含义|类型|
|---|---|---|
|telephone|手机号|string|
|password|密码|string|

请求参数示例：

```json
{
    "email": "18805862675",
    "password": "123456"
}
```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|result|结果|string|
|user|成功时返回|object|
|errorMsg|失败时返回|string|


成功返回数据示例：

```json
{
    "result": "success",
    "user": {
        "_id": "5964653f7c95dd120ca8e5b9",
        "telephone": "18805862675",
        "password": "123456",
        "__v": 0,
        "address": [],
        "interest": []
    }
}
```

失败返回数据示例：
#### 密码错误
```json  
{
    "result": "error",
    "errorMeg": "1"
}
```
#### 找不到该用户
```json
{
    "result": "error",
    "errorMeg": "2"
}
```

### 修改用户信息模块

| 接口地址 | 请求方式 |
| --- | --- |
| /users/changeInformation | PATCH|

#### 请求参数

|名称|含义|类型|
|---|---|---|
|telephone|手机号|string|
|photo|头像|string|
|interest|兴趣爱好|Array|
|address|收货地址|Array|
|name|昵称|string|
|gender|性别|string|


请求参数示例：

```json
{
    "telephone": "18805862675",
    "photo":"I.jpg",
    "interest":"[运动，美食]"
    "address":"[{name:"xukangqi",telephone:"123124",address:"辽宁省沈阳市东北大学"}]",
    "name":"海怪",
    "gender":"female"
}
```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|result|结果|string|



成功返回数据示例：

```json
{
    "result": "success",

}
```

失败返回数据示例：

```json  
{
    "result": "error",
} 
```

### 获取商品信息

| 接口地址 | 请求方式 |
| --- | --- |
| /goods/goods | GET |

#### 请求参数

|名称|含义|类型|
|---|---|---|
|ID|商品编号|Number|



请求参数示例：

```json
{
    "ID": "1"
}
```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|ID|商品编号|Number|
|price| 价格|Number|
|topName|商品名字|String|
|chara|商品品类四字描述|String|
|subName|商品二级名字|String|
|shortDescription|6个简短描述，详情页需要|Array|
|shortDescriptionImage|3个描述的小图片| Array|
|headImage|顶部主要描述图片，第一张图片为缩小时展示| Array|
|type |商品能选分类|Array|
|inventory|库存| Number|
|description|商品介绍图片| Array|
|information|商品参数| Array|
|sale|商品销量|Number|
|category|商品所属分类|String|
|date |商品上架时间|String|
|manufacturer|商品制造商| String|
|label|商品正在进行的活动|Array|



成功返回数据示例：

```json
{
    "result": "success",
    "data": [
        {
            "_id": "596480f3e1f2080bf4d296dd",
            "ID": 4,
            "price": 45,
            "topName": "a",
            "subName": "b",
            "chara":"a",
            "inventory": 999,
            "sale": 39,
            "category": "居家",
            "date": "1499758835010",
            "manufacturer": "ck",
            "__v": 0,
            "label": [
                {
                    "type": "1",
                    "title": "a"
                },
                {
                    "type": "2",
                    "title": "a"
                }
            ],
            "information": [
                "a",
                "a",
                "a",
                "a",
                "a",
                "a"
            ],
            "description": [
                "a",
                "a",
                "a",
                "a",
                "a",
                "a"
            ],
            "type": [
                "a",
                "a",
                "a",
                "a",
                "a",
                "a"
            ],
            "headImage": [
                "a",
                "a",
                "a",
                "a",
                "a"
            ],
            "shortDescriptionImage": [
                "a",
                "a",
                "a",
                "a",
                "a",
                "a"
            ],
            "shortDescription": [
                "a",
                "a",
                "a",
                "a",
                "a",
                "a"
            ]
        }
}
```

失败返回数据示例：

```json  
{
    "result": "error",
} 
```


### 获取销量前几的商品信息

| 接口地址 | 请求方式 |
| --- | --- |
| /goods/topSale | GET |

#### 请求参数

|名称|含义|类型|
|---|---|---|




请求参数示例：

```json
{
    //无需参数
}
```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|ID|商品编号|Number|
|price| 价格|Number|
|topName|商品名字|String|
|chara|商品品类四字描述|String|
|subName|商品二级名字|String|
|headImage|描述图片|String|
|label|商品正在进行的活动|Array|



成功返回数据示例：

```json
{
    "result": "success",
    "data": [
        {
            "_id": "596480f3e1f2080bf4d296dd",
            "ID": 4,
            "price": 45,
            "topName": "a",
            "chara":"a",
            "subName": "b",
            "label": [
                {
                    "type": "1",
                    "title": "a"
                },
                {
                    "type": "2",
                    "title": "a"
                }
            ],
            
        }
        ......
}
```

失败返回数据示例：

```json  
{
    "result": "error",
} 
```

### 获取最新上架的商品信息

| 接口地址 | 请求方式 |
| --- | --- |
| /goods/recentSale | GET |

#### 请求参数

|名称|含义|类型|
|---|---|---|




请求参数示例：

```json
{
    //无需参数
}
```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|ID|商品编号|Number|
|price| 价格|Number|
|topName|商品名字|String|
|chara|商品品类四字描述|String|
|subName|商品二级名字|String|
|headImage|描述图片|String|
|label|商品正在进行的活动|Array|



成功返回数据示例：

```json
{
    "result": "success",
    "data": [
        {
            "_id": "596480f3e1f2080bf4d296dd",
            "ID": 4,
            "price": 45,
            "topName": "a",
            "chara":"a",
            "subName": "b",
            "label": [
                {
                    "type": "1",
                    "title": "a"
                },
                {
                    "type": "2",
                    "title": "a"
                }
            ],
            
        }
        ......
}
```

失败返回数据示例：

```json  
{
    "result": "error",
} 
```

### 根据商品分类获取所有商品分类下的商品

| 接口地址 | 请求方式 |
| --- | --- |
| /goods/displayGoods | GET |

#### 请求参数

|名称|含义|类型|
|---|---|---|



请求参数示例：

```json
{
    //无需参数
}
```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|result|结果|String|
|name|商品分类|String|
|data|当前分类下的商品|Array|




成功返回数据示例：

```json
{
    "result": "success",
    "data": [
        {
            "name": "0",
            "data": [
                {
                    "ID": 0,
                    "topName": "a",
                    "subName": "b",
                    "price": 5,
                    "label": [
                        {
                            "type": "1",
                            "title": "a"
                        },
                        {
                            "type": "2",
                            "title": "a"
                        }
                    ],
                    "chara": "A",
                    "headImage": "a",
                    "category": "0"
                },
                {
                    "ID": 0,
                    "topName": "a",
                    "subName": "b",
                    "price": 5,
                    "label": [
                        {
                            "type": "1",
                            "title": "a"
                        },
                        {
                            "type": "2",
                            "title": "a"
                        }
                    ],
                    "chara": "A",
                    "headImage": "a",
                    "category": "0"
                }
                .......
```

失败返回数据示例：

```json  
{
    "result": "error",
} 
```

### 获取商品分类

| 接口地址 | 请求方式 |
| --- | --- |
| /goods/category | GET |

#### 请求参数

|名称|含义|类型|
|---|---|---|




请求参数示例：

```json
{
    //无需参数
}
```

#### 返回参数

|名称|含义|类型|
|---|---|---|
|result|结果|String|

|data|返回数据|Array|
|data>name|分类名|String|
|data>picture|分类页面图片|String|
|data>subCatagory|子分类|Array|



成功返回数据示例：

```json
{
    "result": "success",
    "data": [
        {
            "_id": "5965c26e9258131360e27a10",
            "name": "9",
            "picture": "a.jpg",
            "__v": 0,
            "subCatagory": [
                {
                    "name": 109,
                    "photo": "a.jpg"
                },
                {
                    "name": "a",
                    "photo": "a.jpg"
                }
            ]
        },
        {
            "_id": "5965c3991a207f1514419867",
            "name": "0",
            "picture": "a.jpg",
            "__v": 0,
            "subCatagory": [
                {
                    "name": 100,
                    "photo": "a.jpg"
                },
                {
                    "name": "a",
                    "photo": "a.jpg"
                }
            ]
        }
        ]
```

失败返回数据示例：

```json  
{
    "result": "error",
} 
```